<div [class]="options?.htmlClass"
  [class.has-feedback]="options?.feedback !== false && options?.isInputWidget && formControl?.dirty"
  [class.has-error]="!options?.disableErrorState && formControl?.errors && formControl?.dirty"
  [class.has-success]="!options?.disableSuccessState && !formControl?.errors && formControl?.dirty">

  <button *ngIf="isRemovable" (click)="removeItem()" class="close pull-right"
    style="position: relative; z-index: 20;" type="button">
    <span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
  </button>
  <div *ngIf="options?.messageLocation === 'top'">
    <p *ngIf="!options?.disableErrorState && options?.feedback !== false && options?.errorMessage && formControl?.dirty"
      [innerHTML]="options?.errorMessage" class="help-block"></p>
    <p *ngIf="options?.feedback !== false && formControl?.dirty"
      [id]="layoutNode?.dataPointer + 'Status'" class="sr-only"
      [innerHTML]="formControl?.errors ? '(error)' : '(success)'"></p>
    <p *ngIf="options?.description" [innerHTML]="options?.description" class="help-block"></p>
    <p *ngIf="options?.help" [innerHTML]="options?.help" class="help-block"></p>
  </div>

  <label *ngIf="options?.title" [attr.for]="layoutNode?.dataPointer"
    [class]="options?.labelHtmlClass" [class.sr-only]="options?.notitle"
    [innerHTML]="options?.title"></label>
  <strong *ngIf="options?.title && options?.required" class="text-danger">*</strong>
  <p *ngIf="layoutNode?.type === 'submit' && formSettings?.globalOptions?.fieldsRequired">
    <strong class="text-danger">*</strong> = required fields
  </p>
  <div [class.input-group]="options?.fieldAddonLeft || options?.fieldAddonRight">
    <span *ngIf="options?.fieldAddonLeft" class="input-group-addon"
      [innerHTML]="options?.fieldAddonLeft"></span>

    <div #widgetContainer></div>

    <span *ngIf="options?.fieldAddonRight" class="input-group-addon"
      [innerHTML]="options?.fieldAddonRight"></span>
  </div>

  <span *ngIf="options?.feedback !== false && options?.isInputWidget &&
    !options?.fieldAddonRight && !options.isArrayItem && formControl?.dirty"
    [class.glyphicon-ok]="!options?.disableSuccessState && !formControl?.errors"
    [class.glyphicon-remove]="!options?.disableErrorState && formControl?.errors"
    aria-hidden="true" class="form-control-feedback glyphicon"></span>
  <div *ngIf="options?.messageLocation !== 'top'">
    <p *ngIf="!options?.disableErrorState && options?.feedback !== false && options?.errorMessage && formControl?.dirty"
      [innerHTML]="options?.errorMessage" class="help-block"></p>
    <p *ngIf="options?.feedback !== false && formControl?.dirty" [id]="layoutNode?.dataPointer + 'Status'"
      [innerHTML]="formControl?.errors ? '(error)' : '(success)'" class="sr-only"></p>
    <p *ngIf="options?.description" [innerHTML]="options?.description" class="help-block"></p>
    <p *ngIf="options?.help" [innerHTML]="options?.help" class="help-block"></p>
  </div>
</div>

<div *ngIf="debug && debugOutput">debug: <pre *ngIf="debug">{{debugOutput}}</pre></div>
